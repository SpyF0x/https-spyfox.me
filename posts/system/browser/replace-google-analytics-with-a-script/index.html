<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Replace Google Analytics with a script - ~# SpyF0x_</title><meta name=Description content="Getting rid of GAFAM one step at a time"><meta property="og:title" content="Replace Google Analytics with a script"><meta property="og:description" content="Getting rid of GAFAM one step at a time"><meta property="og:type" content="article"><meta property="og:url" content="https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/"><meta property="og:image" content="https://spyfox.me/logo.png"><meta property="article:published_time" content="2021-09-11T16:00:00+00:00"><meta property="article:modified_time" content="2021-09-11T16:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://spyfox.me/logo.png"><meta name=twitter:title content="Replace Google Analytics with a script"><meta name=twitter:description content="Getting rid of GAFAM one step at a time"><meta name=application-name content="~# SpyF0x_"><meta name=apple-mobile-web-app-title content="~# SpyF0x_"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/><link rel=prev href=https://spyfox.me/posts/cybersecurity/stories/an-iso-file-a-botnet-a-world-of-warcaft-server-and-me/><link rel=next href=https://spyfox.me/posts/system/linux/raspberry/diluate-your-traffic-and-escape-mass-surveillance/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Replace Google Analytics with a script","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/spyfox.me\/posts\/system\/browser\/replace-google-analytics-with-a-script\/"},"image":["https:\/\/spyfox.me\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"tutorials, google, privacy","wordcount":626,"url":"https:\/\/spyfox.me\/posts\/system\/browser\/replace-google-analytics-with-a-script\/","datePublished":"2021-09-11T16:00:00+00:00","dateModified":"2021-09-11T16:00:00+00:00","publisher":{"@type":"Organization","name":"SpyF0x","logo":"https:\/\/spyfox.me\/images\/avatar.png"},"author":{"@type":"Person","name":" SpyF0x "},"description":"Getting rid of GAFAM one step at a time"}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="~# SpyF0x_"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/avatar.png data-srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" data-sizes=auto alt=/images/avatar.png title=/images/avatar.png>~# SpyF0x_</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/posts/about>About </a><a class=menu-item href=/index.xml><i class="fas fa-rss fa-fw"></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="~# SpyF0x_"><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/avatar.png data-srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" data-sizes=auto alt=/images/avatar.png title=/images/avatar.png>~# SpyF0x_</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/posts/about title>About</a><a class=menu-item href=/index.xml title><i class="fas fa-rss fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Replace Google Analytics with a script</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=" author" class=author><i class="fas fa-user-circle fa-fw"></i> SpyF0x </a></span>&nbsp;<span class=post-category>included in <a href=/categories/privacy/><i class="far fa-folder fa-fw"></i>Privacy</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-09-11>2021-09-11</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;626 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;3 minutes&nbsp;</div></div><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/images/tutorials/umami/replace-google-anal-with-umami0.png data-srcset="/images/tutorials/umami/replace-google-anal-with-umami0.png, /images/tutorials/umami/replace-google-anal-with-umami0.png 1.5x, /images/tutorials/umami/replace-google-anal-with-umami0.png 2x" data-sizes=auto alt=/images/tutorials/umami/replace-google-anal-with-umami0.png title="Getting rid of GAFAM one step at a time"></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#a-bit-of-background>A bit of background</a></li><li><a href=#functionnalities>Functionnalities</a></li><li><a href=#how-to-install-it>How to install it</a></li><li><a href=#make-a-good-action->Make a good action !</a></li></ul></nav></div></div><div class=content id=content><p>Here is a guide to swap the Google Analytics with Umami, a free, open source and privacy friendly app to selfhost.</p><h2 id=a-bit-of-background>A bit of background</h2><hr><p>Google Analytics is one of most evil tools you must to get rid off for the sake of your visitors. Don&rsquo;t be fooled by all the functionnalities it offers : do you really need to know the age and the gender of your visitors ? Why don&rsquo;t get also the color of their underwear ? It could be useful to get more !</p><p>More seriously, the saddest thing here is that all this data is stored on google&rsquo;s servers and most certainly crossed-referenced. So Google certainly know more than the color of your underwear with all those websites using Google analytics you browsed with your Google chrome browser on you Android phone.</p><figure><img src=/images/tutorials/umami/replace-google-anal-with-umami1.png alt="due to adblock I had to shorten analytics into anal"></figure><p>Fortunately, if you want to collect some statistics of your website traffic but you don&rsquo;t want to use Google Analytics multiple alternatives do exists. If you like self hosting and open source I might have something for you.</p><p>It&rsquo;s called Umami and it&rsquo;s a super simple to install, easy to use, and it&rsquo;s free under the MIT free license!</p><h2 id=functionnalities>Functionnalities</h2><hr><p>To keep it light, Umami mesures the same informations you could retrieve in your web server logs such as pages hit, devices used and where your visitors come from. Everything is displayed on a single, easy-to-read page and you can add an unlimited number of websites to it from a single installation. You can even have statistics by subdomains or by URLs.</p><figure><img src=/images/tutorials/umami/replace-google-anal-with-umami.png alt="due to adblock I had to shorten analytics into anal"></figure><p>One of the problems that webmasters have is because of adblockers, the tracking of statistics is now totally distorted. As Umami is hosted by you, under your own domain, it allows to bypass the problem and avoid adblockers.</p><p>The tracking script that integrates into your web pages is very small (about 2KB) and supports older browsers. Umami is multi-user capable so you can set up an instance of Umami and let your friends use it for their websites if you want. And if you or your friends want to share your statistics publicly, you can do so by generating unique URLs.</p><p>A demo can be found <a href=https://app.umami.is/share/8rmHaheU/umami.is target=_blank rel="noopener noreffer">here</a> for those who want to play with it.</p><h2 id=how-to-install-it>How to install it</h2><hr><p>To run Umami, you will need at least a server with a MySQL or Postgresql database and npm.</p><p>Then run the following commands:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh>$ git clone https://github.com/mikecao/umami.git
$ <span class=nb>cd</span> umami
$ npm install
</code></pre></td></tr></table></div></div><p>Then create the database :</p><p>Command for MySQL :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh>$ mysql -u username -p databasename &lt; sql/schema.mysql.sql
</code></pre></td></tr></table></div></div><p>Command for PostgreSQL :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh>$ psql -h hostname -U username -d databasename -f sql/schema.postgresql.sql
</code></pre></td></tr></table></div></div><p>This import will create a login account with the username &ldquo;admin&rdquo; and a default password &ldquo;umami&rdquo;.
Then to configure Umami, create an .env file on the server with this in it:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>DATABASE_URL=(connection url)
HASH_SALT=(any random string)
</code></pre></td></tr></table></div></div><p>Your connection url should be in the following format depending on the type of base you have chosen:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-fallback data-lang=fallback>mysql://username:mypassword@localhost:3306/mydb
postgresql://username:mypassword@localhost:5432/mydb
</code></pre></td></tr></table></div></div><p>Regarding the hash, it&rsquo;s used to generate unique values for your installation.</p><p>Then you just have to build the application with the following command:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh>$ npm run build
</code></pre></td></tr></table></div></div><p>Then launch the Umani instance like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh>$ npm start
</code></pre></td></tr></table></div></div><p>By default, the application runs on http://localhost:3000.</p><p>It&rsquo;s also possible to install Umami using Docker like this (with Postgresql):</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh>$ docker pull ghcr.io/mikecao/umami:postgresql-latest
</code></pre></td></tr></table></div></div><p>Or with Mysql like this :</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-sh data-lang=sh>$ docker pull ghcr.io/mikecao/umami:mysql-latest
</code></pre></td></tr></table></div></div><h2 id=make-a-good-action->Make a good action !</h2><hr><p>Hit that <code>CTRL + D</code> to bookmark this website üîñ</p><p>Internet is for sharing, so please consider sharing this post if you liked it !</p><p>It will be so much better than any newsletter #privacy #spam #planet üåç ‚ù§Ô∏è</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-09-11</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/posts/system/browser/replace-google-analytics-with-a-script/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/ data-title="Replace Google Analytics with a script" data-hashtags=tutorials,google,privacy><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/ data-hashtag=tutorials><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/><i class="fab fa-reddit fa-fw"></i></a><a href=javascript:void(0); title="Share on VK" data-sharer=vk data-url=https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/ data-title="Replace Google Analytics with a script" data-caption="Getting rid of GAFAM one step at a time" data-image=/images/tutorials/umami/replace-google-anal-with-umami0.png><i class="fab fa-vk fa-fw"></i></a><a href=javascript:void(0); title="Share on Pocket" data-sharer=pocket data-url=https://spyfox.me/posts/system/browser/replace-google-analytics-with-a-script/><i class="fab fa-get-pocket fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/tutorials/>tutorials</a>,&nbsp;<a href=/tags/google/>google</a>,&nbsp;<a href=/tags/privacy/>privacy</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/cybersecurity/stories/an-iso-file-a-botnet-a-world-of-warcaft-server-and-me/ class=prev rel=prev title="An ISO file, a botnet, a World of Warcraft server and me"><i class="fas fa-angle-left fa-fw"></i>An ISO file, a botnet, a World of Warcraft server and me</a>
<a href=/posts/system/linux/raspberry/diluate-your-traffic-and-escape-mass-surveillance/ class=next rel=next title="Diluate your traffic and escape mass surveillance">Diluate your traffic and escape mass surveillance<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2019 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank> SpyF0x </a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br><span class=icp><a href=/posts/disclaimer>Disclaimer</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>